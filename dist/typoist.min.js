!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Typoist=e()}(this,(function(){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function n(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}var i=n((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.generateTypoCharacter=void 0;var n=[[["`","~"],["1","!"],["2","@"],["3","#"],["4","$"],["5","%"],["6","^"],["7","&"],["8","*"],["9","("],["0",")"],["-","_"],["=","+"]],[["\t","\t"],["q","Q"],["w","W"],["e","E"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["[","{"],["]","}"],["\\","|"]],[["a","A"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],[";",":"],["'",'"'],["\n","\n"]],[["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M"],[",","<"],[".",">"],["/","?"]],[[" "," "]],[[" "," "]],[[" "," "]],[[" "," "]],[[" "," "]],[[" "," "]],[[" "," "]]];e.generateTypoCharacter=function(t){for(var e=0;e<n.length;e++)for(var i=0;i<n[e].length;i++)for(var o=0;o<2;o++)if(n[e][i][o]===t){var r=e,s=i,a=Math.random(),u=Math.random();return a<=1/3?r++:a>=2/3&&r--,u<=1/3?s++:u>=2/3&&s--,r=Math.max(0,Math.min(r,n.length-1)),s=Math.max(0,Math.min(s,n[r].length-1)),n[r][s][o]}return t}})),o=n((function(e,n){var o=t&&t.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},o.apply(this,arguments)},r=t&&t.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{u(i.next(t))}catch(t){r(t)}}function a(t){try{u(i.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((i=i.apply(t,e||[])).next())}))},s=t&&t.__generator||function(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(s=0)),s;)try{if(n=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],i=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.Typoist=n.TypoistDefaults=void 0,n.TypoistDefaults={speed:10,mistakeProbability:.1,appendFunction:function(t){return r(void 0,void 0,void 0,(function(){return s(this,(function(t){return[2]}))}))},deleteFunction:function(){return r(void 0,void 0,void 0,(function(){return s(this,(function(t){return[2]}))}))},onComplete:function(){}};var a=function(){function t(t){this.isTyping=!1,this.typedIndex=-1,this.settings=o(o({},n.TypoistDefaults),t),this.speed=this.settings.speed,this.typingDelay=1e3/this.speed,this.mistakeProbability=this.settings.mistakeProbability,this.appendFunction=this.settings.appendFunction,this.deleteFunction=this.settings.deleteFunction,this.onComplete=this.settings.onComplete}return t.prototype.type=function(t){this.isTyping||(this.stringToType=t,this.typedIndex=-1,this.startTyping())},t.prototype.typeLoop=function(){return r(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return this.isTyping?this.typedIndex<this.stringToType.length-1?Math.random()>=1-this.mistakeProbability?[4,this.appendFunction((0,i.generateTypoCharacter)(this.stringToType[this.typedIndex+1]))]:[3,6]:[3,11]:[3,12];case 1:return t.sent(),[4,this.waitRandomDelay()];case 2:return t.sent(),[4,this.deleteFunction()];case 3:return t.sent(),[4,this.waitRandomDelay()];case 4:return t.sent(),[4,this.typeLoop()];case 5:return t.sent(),[3,10];case 6:return this.typedIndex++,[4,this.appendFunction(this.stringToType[this.typedIndex])];case 7:return t.sent(),[4,this.waitRandomDelay()];case 8:return t.sent(),[4,this.typeLoop()];case 9:t.sent(),t.label=10;case 10:return[3,12];case 11:this.isTyping=!1,this.onComplete(),t.label=12;case 12:return[2]}}))}))},t.prototype.waitRandomDelay=function(){return r(this,void 0,void 0,(function(){var t=this;return s(this,(function(e){return[2,new Promise((function(e){setTimeout(e,t.typingDelay*Math.random())}))]}))}))},t.prototype.startTyping=function(){return this.isTyping||(this.isTyping=!0,this.typeLoop()),this},t.prototype.stopTyping=function(){return this.isTyping&&(this.isTyping=!1),this},t}();n.Typoist=a}));return e(o)}));
